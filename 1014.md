# w9 Lecture

## last lecture's buffer overflow code

- how can the buffer in a c program have 200 bytes size when the actual c code only grants  `char[100]`?
  - the makefile for cmake(?) has `-dbufsize` option set to 200

- what is `-z execstack` in the gcc command for?
  - allows execution from stack memory

## Buffer overflow for codes without such option

- bof than return to existing function in own code
- bof then return to a library call
  - problem: each library functions are not malicious
  - solution: achieve just a small objective
  - the small objective achieving codes(gadgets) together achieve malicious intent
    - which is called return oriented programming(ROP)
      - since attack is based on returning to many places

## Examination of makefile

- why is `-fstack-protector` option necessary?
  - gcc turns on stack protector(canary) only when it thinks it is necessary
    - that is when a buffer is long enough
    - for optimization
    - the example has 200 chars, but canary option is not on without the explicit option
  - it is difficult to execute buffer overflow when buffer is small
    - why?
